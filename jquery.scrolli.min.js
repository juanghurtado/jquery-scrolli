(function($){$.scrolli=function(element,options){var defaults={showArrowPager:true,showNumericPager:true,pagerLeftLabel:"Move left",pagerRightLabel:"Move right",autoplay:false,autoplayDelay:10000,moveSpeed:200,moveEasing:"linear",beforeMove:function($target){},afterMove:function($target){}};var plugin=this,element=element,timer=null,$element=$(element),$scrolli=$element,$wrapper,$elements,$elementWrappers,$currentElement,$pagerLeft,$pagerRight,$numericPager,$numericPagerItem;plugin.settings={};plugin.init=function(){ps=plugin.settings=$.extend({},defaults,options);if($scrolli.hasClass("scrolli-processed")){return}$scrolli.wrap('<div class="scrolli-wrapper"></div>').wrap('<div class="scrolli-overflow"></div>').find(".scrolli-element").wrap('<div class="scrolli-element-wrapper"></div>');$wrapper=$scrolli.parent().parent();$overflow=$scrolli.parent();$elements=$scrolli.find(".scrolli-element");$elementWrappers=$scrolli.find(".scrolli-element-wrapper");$currentElement=$elementWrappers.first();$scrolli.css({left:"0",position:"relative",width:"9999em"});$overflow.css({overflow:"hidden",position:"relative"});$elementWrappers.css({"float":"left",width:$wrapper.width()});if(ps.showArrowPager&&$elements.length>1){$pagerLeft=$('<a href="#" class="scrolli-pager-left">'+ps.pagerLeftLabel+"</a>");$pagerRight=$('<a href="#" class="scrolli-pager-right">'+ps.pagerRightLabel+"</a>");$pagerLeft.bind("click",function(e){clear_timer();plugin.move_to_next();e.preventDefault()}).appendTo($wrapper);$pagerRight.bind("click",function(e){clear_timer();plugin.move_to_prev();e.preventDefault()}).appendTo($wrapper)}if(ps.showNumericPager&&$elements.length>1){$numericPager=$('<ul class="scrolli-pager"></ul>');$numericPagerItem=$('<li class="scrolli-pager-item"><a class="scrolli-pager-link" href="#"></a></li>');$elements.each(function(index){$numericPagerItem.find("a").text(index+1);$numericPager.append($numericPagerItem.clone())});$numericPager.find("a").bind("click",function(e){plugin.move_to($elementWrappers.eq($(this).parent().index()));e.preventDefault()});$numericPager.appendTo($wrapper)}if(ps.autoplay){timer=setInterval(function(){if($currentElement.next().length>0){plugin.move_to_next()}else{plugin.move_to($elementWrappers.first())}},ps.autoplayDelay)}update_visual_state();$scrolli.addClass("scrolli-processed")};plugin.move_to_next=function(){var $prev=$currentElement.next();if($prev.length>0){plugin.move_to($prev)}};plugin.move_to_prev=function(){var $next=$currentElement.prev();if($next.length>0){plugin.move_to($next)}};plugin.move_to=function($target){if($scrolli.is(":animated")||$target==null||$target.length<=0){return}ps.beforeMove($target);var target_left=($target.index()-$currentElement.index())*$currentElement.width(),current_left=$scrolli.position().left;$scrolli.animate({left:(current_left-target_left)+"px"},ps.moveSpeed,ps.moveEasing,ps.afterMove($target));$currentElement=$target;update_visual_state()};var update_visual_state=function(){if(ps.showArrowPager&&$elements.length>1){if($currentElement.next().length<=0){$pagerLeft.hide()}else{$pagerLeft.show()}if($currentElement.prev().length<=0){$pagerRight.hide()}else{$pagerRight.show()}}if(ps.showNumericPager&&$elements.length>1){$numericPager.find(".scrolli-pager-item").removeClass("current").eq($currentElement.index()).addClass("current")}$elementWrappers.removeClass("current");$currentElement.addClass("current")};var clear_timer=function(){if(ps.autoplay){if(timer!=null){clearInterval(timer)}}};plugin.init()};$.fn.scrolli=function(options){return this.each(function(){if(undefined==$(this).data("scrolli")){var plugin=new $.scrolli(this,options);$(this).data("scrolli",plugin)}})}})($);